let prefix="form-input",prefix2="preview-item";const Selectors={uploadLogo:`[${prefix}=upload-image]`,logoPreview:`[${prefix}=image-preview]`,logoUploaded:`[${prefix}=logo]`,logoName:`[${prefix}=logo-name]`,cancelLogo:`[${prefix}=cancel-logo]`,logoErrorLabel:`[${prefix}=logo-error]`,companyName:`[${prefix}=company-name]`,companyEmail:`[${prefix}=company-email]`,companyLocation:`[${prefix}=company-location]`,website:`[${prefix}=website]`,about:`[${prefix}=about-company]`,submitBtn:`[${prefix}=submit-btn]`,formEle:`[${prefix}=form-wrapper]`,previewBtn:`[${prefix}=preview-btn]`,preview:"[page-item=pdf-preview]",logo:`[${prefix2}=logo]`,logoWebsite:`[${prefix2}=logo-website]`,jobRole:`[${prefix2}=jd-role]`,jobAbout:`[${prefix2}=about]`,jobLocation:`[${prefix2}=location]`,jobTitle:`[${prefix2}=jd-title]`,jdFooterText:`[${prefix2}=footer-email]`,jdFooterCompanyName:`[${prefix2}=footer-companyName]`,jdRoleDescription:`[${prefix2}=role-description]`,staticPDF:`[${prefix2}=static-pdf]`},getElementRef=e=>document.querySelector(e);let imageUploadEle,formValues={logo:"",company_name:"",location:"",company_email:"",website:""};const uploadImageEle=getElementRef(Selectors.uploadLogo),companyNameEle=getElementRef(Selectors.companyName),companyEmailEle=getElementRef(Selectors.companyEmail),companyLocationEle=getElementRef(Selectors.companyLocation),websiteEle=getElementRef(Selectors.website),aboutEle=getElementRef(Selectors.about),submitBtnEle=getElementRef(Selectors.submitBtn),previewBtnEle=getElementRef(Selectors.previewBtn),previewEle=getElementRef(Selectors.preview),previewLogoEle=getElementRef(Selectors.logo),jobRoleEle=getElementRef(Selectors.jobRole),jobLocationEle=getElementRef(Selectors.jobLocation),imageErrorMsgEle=getElementRef(Selectors.logoErrorLabel),formSubmitEle=getElementRef(Selectors.formEle),jobTitleEle=getElementRef(Selectors.jobTitle),logoUploadedEle=getElementRef(Selectors.logoUploaded),logoNameEle=getElementRef(Selectors.logoName),logoPreviewEle=getElementRef(Selectors.logoPreview),jobAboutEle=getElementRef(Selectors.jobAbout),cancelLogoBtn=getElementRef(Selectors.cancelLogo),footerTextEle=getElementRef(Selectors.jdFooterText),footerCompanyEle=getElementRef(Selectors.jdFooterCompanyName),jdRoleDescriptionEle=getElementRef(Selectors.jdRoleDescription),createHiddenInputEle=()=>{imageUploadEle=document.createElement("input"),imageUploadEle.type="file",imageUploadEle.style.visibility="hidden",imageUploadEle.accept="image/*",uploadImageEle.appendChild(imageUploadEle),imageUploadEle?.addEventListener("change",(e=>{handleFiles(e.target.files),formValues.logo=e.target.files}))},setupListeners=()=>{uploadImageEle?.addEventListener("click",(e=>{imageUploadEle?.click()})),cancelLogoBtn.addEventListener("click",(e=>{logoUploadedEle.value="",uploadImageEle.style.display="flex",logoPreviewEle.style.display="none"})),companyNameEle.addEventListener("change",(e=>{formValues.company_name=e.target.value,jobRoleEle.innerText=` @ ${e.target.value}`,displayGeneratedJD(),checkFormValues()})),companyEmailEle.addEventListener("change",(e=>{formValues.company_email=e.target.value,displayGeneratedJD(),checkFormValues()})),companyLocationEle.addEventListener("change",(e=>{formValues.location=e.target.value,jobLocationEle.innerText=e.target.value,checkFormValues()})),websiteEle.addEventListener("change",(e=>{formValues.website=e.target.value;const l=`Background (${e.target.value})`;jobTitleEle.innerText=l,checkFormValues()})),aboutEle.addEventListener("change",(e=>{formValues.about_company=e.target.value,jobAboutEle.innerText=e.target.value,checkFormValues()})),submitBtnEle.addEventListener("click",(e=>{if(""===formValues.logo||!formValues.logo.length)return alert("please upload company logo."),void e.preventDefault();for(let e of Object.values(formValues))if(""===e||!e.length)return;setTimeout((()=>{resetForm()}),1800),downloadDisplayedJD()}))},resetForm=()=>{const e=document.querySelector(".w-form-done");e&&(e.style.display="none");const l=document.getElementById("wf-form-JD-form");l&&(l.style.display="flex")},handleFiles=e=>{imageErrorMsgEle.style.display="none";Array.from(e);const l=e[0];if(l.size/1024/1024>5)return imageErrorMsgEle.style.display="block",imageErrorMsgEle.style.color="red",void(imageErrorMsgEle.innerText="File size must be less than 5 MB.");const o=URL.createObjectURL(l);logoUploadedEle.onload=function(){(logoUploadedEle.width>100||logoUploadedEle.height>100)&&(imageErrorMsgEle.style.display="block",imageErrorMsgEle.style.color="red",imageErrorMsgEle.innerText="The image's width & height must be 100px"),checkFormValues()},uploadImageEle.style.display="none",logoUploadedEle.src=o,logoPreviewEle.style.display="flex",logoNameEle.innerText=l.name,previewLogoEle.src=o},displayGeneratedJD=()=>{const e=footerCompanyEle.innerText.replace(/#company_name/g,formValues.company_name);footerCompanyEle.innerText=e,footerTextEle.innerText=formValues.company_email;const l=jdRoleDescriptionEle.innerText.replace(/\[#startup_name\]/g,formValues.company_name);jdRoleDescriptionEle.innerText=l},downloadDisplayedJD=(e,l="sample")=>{const o=getElementRef(Selectors.staticPDF);if(o.hasChildNodes())for(;o.firstChild;)o.removeChild(o.firstChild);const t=previewEle.cloneNode(!0);o.appendChild(t),window.html2canvas=html2canvas;new window.jspdf.jsPDF({orientation:"p",unit:"pt"}).html(o,{callback:function(e){if(/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)){e.output();alert("Please check the new tab for the genrated JD"),window.open(e.output("bloburl"),"_blank")}else e.save(`jd_FC_${formValues.company_name}.pdf`)},margin:[24,24,24,24],autoPaging:"text",html2canvas:{dpi:300,logging:!1,scale:.8}})},checkFormValues=()=>{let e=!0;for(let l of Object.values(formValues))""!==l&&l.length||(e=!1);e?enableSubmitButton():disableSubmitButton()},enableSubmitButton=()=>{submitBtnEle.removeAttribute("disabled"),submitBtnEle.classList.remove("is-disabled")},disableSubmitButton=()=>{submitBtnEle.setAttribute("disabled",""),submitBtnEle.classList.add("is-disabled")};window.addEventListener("load",(e=>{imageUploadEle=document.createElement("input"),imageUploadEle.type="file",imageUploadEle.style.visibility="hidden",imageUploadEle.accept="image/*",uploadImageEle.appendChild(imageUploadEle),imageUploadEle?.addEventListener("change",(e=>{handleFiles(e.target.files),formValues.logo=e.target.files})),submitBtnEle.setAttribute("disabled",""),setTimeout((()=>{uploadImageEle?.addEventListener("click",(e=>{imageUploadEle?.click()})),cancelLogoBtn.addEventListener("click",(e=>{logoUploadedEle.value="",uploadImageEle.style.display="flex",logoPreviewEle.style.display="none"})),companyNameEle.addEventListener("change",(e=>{formValues.company_name=e.target.value,jobRoleEle.innerText=` @ ${e.target.value}`,displayGeneratedJD(),checkFormValues()})),companyEmailEle.addEventListener("change",(e=>{formValues.company_email=e.target.value,displayGeneratedJD(),checkFormValues()})),companyLocationEle.addEventListener("change",(e=>{formValues.location=e.target.value,jobLocationEle.innerText=e.target.value,checkFormValues()})),websiteEle.addEventListener("change",(e=>{formValues.website=e.target.value;const l=`Background (${e.target.value})`;jobTitleEle.innerText=l,checkFormValues()})),aboutEle.addEventListener("change",(e=>{formValues.about_company=e.target.value,jobAboutEle.innerText=e.target.value,checkFormValues()})),submitBtnEle.addEventListener("click",(e=>{if(""===formValues.logo||!formValues.logo.length)return alert("please upload company logo."),void e.preventDefault();for(let e of Object.values(formValues))if(""===e||!e.length)return;setTimeout((()=>{resetForm()}),1800),downloadDisplayedJD()}))}),200)}));